
from mlm_shared import CACHE_DIR
from embeddings_reader import EmbeddingsReader
from tokenizer import Tokenizer

import os

# Многозначные слова (сюда же входят слова с общим значением, уточняемым в словосочетаниях)
multisense_words_str = """
а
б
в
г
д
е
ж
з
и
к
л
м
н
о
п
р
с
т
у
ф
х
ц
ч
ш
щ
э
ю
я
авангард
авангарда
авангарде
авангардом
авангарду
август
августа
августе
августом
августу
ада
аде
аду
авиатехника
авиатехнике
авиатехники
авиатехнику
автомобилист
автомобилиста
автомобилисте
автомобилистом
автомобилисту
автотехника
автотехнике
автотехники
автотехнику
ага
адмирал
адмирала
адмирале
адмиралом
адмиралу
актиний
али
альбом
альбома
альбомам
альбомами
альбомах
альбоме
альбомов
альбомом
альбому
альбомы
амазонка
амазонке
амазонки
амазонкой
амур
аналитика
аналитики
аналитику
ангара
ангаре
ангару
ангары
ангела
ангеле
ангелу
апач
аппарат
аппарата
аппарате
аппаратом
аппарату
арсенал
арсенала
арсенале
арсеналом
арсеналу
астрофизика
астрофизике
астрофизики
астрофизику
атланта
атланте
атланту
атланты
атлас
атласа
атласе
атласом
атласу
аэромеханика
баба
бабе
бабой
бабу
бабы
бабки
бабок
базар
байка
байке
байки
байку
бак
бака
баке
баки
баком
баку
балка
балкам
балками
балках
балке
балки
балкой
балку
балок
банка
банкам
банками
банке
банки
банку
бар
бара
баранов
барак
барака
бараке
бараком
бараку
барашек
барашка
барашки
барашком
барашку
басист
басиста
басисты
батарее
батареей
батареи
батарею
батарея
батюшка
батюшке
батюшки
батюшкой
батюшку
бега
бегом
бегу
белил
белила
белка
белке
белки
белку
белок
белые
белым
белыми
белых
берег
берегу
берет
берете
бильярдная
бильярдной
бильярдную
бис
бит
бита
благодаря
блестящая
блестящего
блестящее
блестящей
блестящем
блестящему
блестящие
блестящий
блестящим
блестящими
блестящих
блестящую
блок
блока
блоке
блокировка
блокировке
блокировки
блокировкой
блокировку
блоком
блоку
боб
боба
бобе
бобом
бобу
боевик
боевика
боевикам
боевиками
боевиках
боевике
боевики
боевиков
боевиком
боевику
бой
боком
бокс
бокса
боксе
боксер
боксера
боксере
боксером
боксеру
боксом
боксу
болей
болид
болида
болидам
болидами
болидах
болиде
болидов
болидом
болиду
болиды
болгарка
болгарке
болгарки
болгаркой
болгарку
болел
болела
болели
болеть
боливар
боливара
боливаре
боливаров
боливаром
боливару
болтал
болтала
болтали
болтать
болтушка
болтушке
болтушки
болтушкой
болтушку
больная
больно
больного
больной
больном
больному
больную
больные
больным
больными
больных
бомбардир
бомбардира
бомбардире
бомбардиром
бомбардиру
бомбила
бор
бора
боре
борец
борзая
борзой
борзую
борзые
борзым
борзыми
борзых
бором
бору
борца
борце
борцом
борцу
бот
бота
боте
ботом
боту
ботаника
ботанике
ботаники
ботанику
брак
брака
браке
браком
браку
бреду
брейк
брони
будущее
будущего
будущем
будущему
будущим
бука
буке
буки
буку
бумаги
бур
буре
бури
буржуйка
буржуйке
буржуйки
буржуйкой
буржуйку
буром
буря
бурят
бухал
бухала
бухали
бухать
бухнуть
бухта
бухте
бухтой
бухту
бухты
быков
бьется
бьётся
бьются
бьющаяся
бьющиеся
бьющийся
ваз
ваза
вазе
вазу
вазы
вал
вала
валам
валами
валах
вале
вали
валим
валить
валов
валом
валу
валы
валя
варвара
ведомостей
ведомости
ведомостям
ведомостями
ведомостях
ведущая
ведущего
ведущей
ведущем
ведущему
ведущие
ведущий
ведущим
ведущими
ведущих
ведущую
везти
век
века
веками
вели
велик
велики
вена
вене
веной
вену
вены
вера
вере
верой
веру
веры
вертел
вертела
верхом
верша
вестей
вести
вестях
ветви
ветвь
ветвью
вещей
взвесь
взрыв
вид
вида
видам
видами
видах
виде
видов
видом
виду
виды
видение
видением
видении
видению
видения
вил
вилка
вилке
вилки
вилкой
вилку
вина
вине
винил
вину
вирус
вируса
вирусам
вирусами
вирусах
вирусе
вирусов
вирусом
вирусу
вирусы
виски
витязе
витязем
витязь
витязю
витязя
вкалывавшая
вкалывавшего
вкалывавшей
вкалывавшем
вкалывавшему
вкалывавший
вкалывавшим
вкалывавшую
вкалывал
вкалывала
вкалывали
вкалывать
вкалывая
включая
владимир
владимира
владимире
владимиром
владимиру
вмешивается
вмешиваются
внуков
внучка
водила
водоканал
водоканала
водоканале
водоканалом
водоканалу
водяного
водяной
водяном
водяным
военного
военном
военному
военные
военный
военным
военными
военных
вой
волков
волок
вольно
воображала
вооружение
вооружением
вооружении
вооружению
вооружения
вороной
ворот
ворота
воротил
воротила
воротили
воротить
воспитанная
воспитанного
воспитанной
воспитанном
воспитанному
воспитанную
воспитанные
воспитанный
воспитанным
воспитанными
воспитанных
восток
востока
востоке
востоком
востоку
воя
врезается
врезал
врезала
врезалась
врезали
врезались
врезался
врезать
врезаться
временная
временного
временной
временном
временному
временную
временные
временным
временными
временных
врывалась
врывались
врывался
врываться
все
всего
встречу
всыпал
всыпала
всыпали
всыпать
вывел
вывела
вывели
выводил
выводила
выводили
выводить
выгорать
выгорел
выгорела
выгорели
выгореть
выдержка
выдержке
выдержки
выдержкой
выдержку
выезд
выезда
выезде
выездом
выезду
выжил
выжила
выжили
выживать
вызову
выкупал
выкупала
выкупать
выносила
выносить
выпечка
выпечке
выпечки
выпечкой
выпечку
выписка
выписке
выписки
выпиской
выписку
вырезал
вырезали
вырубил
вырубила
вырубили
вырубить
высыпалась
высыпались
высыпался
высыпаться
вычитал
вычитала
вычитали
вычитать
гавайка
гавайке
гавайки
гавайкой
гавайку
газа
газе
газу
газы
газели
газель
газелью
галка
галке
галки
галкой
галку
гвоздика
гвоздике
гвоздики
гена
генетика
генетике
генетики
генетику
геном
гены
германия
героине
гидротехника
гидротехнике
гидротехники
гидротехнику
глава
главе
главка
главке
главку
главой
главу
главы
гладил
гладила
гладили
гладить
гладь
глазок
глобус
глотку
глоток
глоточка
глоточке
глоточки
глоточку
глохнуть
гнет
гну
гол
голов
гор
гора
горе
гори
горн
горна
горне
горном
горну
гору
горький
горьким
горького
горьком
горькому
горю
горючего
горючее
горючем
горючему
горючим
горя
гости
готов
гравировка
гравировке
гравировки
гравировкой
гравировку
град
града
граде
градом
граду
грамота
грамоте
грамотой
грамоту
грамоты
гранат
граната
гранате
гранату
гранаты
грант
гранта
гранте
грантом
гранту
граф
графа
графе
графу
графика
графике
графики
графику
гребешка
гребешке
гребешком
гребешку
гребешок
гриф
грифа
грифе
грифом
грифу
грозного
грозном
грозному
грозный
грозным
громила
громовым
грусти
груша
груше
грушей
груши
грушу
губу
губка
губкам
губками
губках
губке
губки
губкой
губку
губок
гусениц
гусеница
гусеницам
гусеницами
гусеницах
гусенице
гусеницей
гусеницу
гусеницы
гуще
дали
дам
дан
данные
данными
данных
дача
даче
дачей
дачи
дачу
дворник
дворника
дворнике
дворником
дворнику
де
девелопер
девелопера
девелопере
девелопером
девелоперу
дедов
дежурного
дежурном
дежурному
дежурный
дежурным
дел
дела
дели
делись
дембель
демон
демона
демоне
демоном
демону
держателе
держателем
держатель
держателю
держателя
детектив
детектива
детективам
детективами
детективах
детективе
детективов
детективом
детективу
детективы
джин
джина
джине
джином
джину
дик
диком
динамика
динамике
динамики
динамику
дисциплина
дисциплине
дисциплиной
дисциплину
дисциплины
дне
днем
добро
добыча
добыче
добычей
добычи
добычу
довел
довела
довели
доверенного
доверенном
доверенному
доверенный
доверенным
доводить
довольно
дозорного
дозорном
дозорному
дозорный
дозорным
док
дока
доке
доком
доку
долгов
долина
долиной
долину
доложил
доложила
доложили
доложить
дом
дома
доме
доменного
доменном
доменному
доменный
доменным
домового
домовой
домовом
домовому
домовым
домом
дому
домен
дон
дорог
дорога
дорогой
досыпал
досыпала
досыпали
досыпать
др
дуло
дума
думе
думой
думу
думы
дури
дух
духа
духам
духами
духе
духи
духов
духом
духу
душ
душа
душе
душу
его
едок
еду
ее
её
ели
ерш
ерша
ерше
ершом
ершу
есть
ёрш
жажду
жал
жала
жали
жаль
жать
жгут
железа
железе
железу
жене
женю
жесть
животного
животное
животном
животному
животным
жидок
жил
жила
жуков
жучка
забегал
забегала
забегали
забегать
забился
забилась
забились
забиться
забое
забоем
забой
забор
забора
заборе
забором
забору
забою
забоя
забрала
забрало
заброшенная
заброшенного
заброшенной
заброшенном
заброшенному
заброшенную
заброшенные
заброшенный
заброшенным
заброшенными
заброшенных
заварка
заварке
заварки
заваркой
заварку
завел
завела
завели
завести
завод
завода
заводе
заводом
заводу
заводи
заводила
заводить
заготовка
заготовке
заготовки
заготовкой
заготовку
задевал
задевала
задевали
задевать
задел
зазубренная
зазубренного
зазубренное
зазубренной
зазубренном
зазубренному
зазубренную
зазубренные
зазубренный
зазубренным
зазубренными
зазубренных
зазывала
зайцев
закаленная
закаленного
закаленной
закаленному
закаленную
закаленные
закаленный
закаленным
закаленными
закаленных
закатил
закатила
закатили
закатить
заключение
заключением
заключении
заключению
заключения
заключенная
заключенного
заключенной
заключенном
заключенному
заключенную
заключенные
заключенный
заключенным
заключенными
заключенных
залив
залог
залога
залоге
залогом
залогу
замер
заметен
замка
замке
замки
замковая
замкового
замковое
замковой
замковом
замковому
замковую
замковые
замковый
замковым
замковыми
замковых
замком
замку
замок
замотал
замотала
замотали
замотать
замочил
замочила
замочили
замочить
замыкаться
зао
запад
запада
западе
западом
западу
запал
запас
запах
запахнуть
запевала
запил
запила
заплыв
записи
запись
записью
запой
запор
запора
запоре
запорожец
запорожца
запорожце
запорожцем
запорожцу
запором
запору
заправила
заправка
заправке
заправки
заправкой
заправку
запускал
запускала
запускали
запускать
запустил
запустила
запустили
запустит
запустить
запустят
заработал
заработала
заработали
заработать
зараз
заряд
заряда
заряде
зарядка
зарядке
зарядки
зарядкой
зарядку
зарядом
заряду
заставил
заставила
заставили
заставить
засыпал
засыпала
засыпали
засыпать
затапливать
затвор
затопил
затопила
затопили
затопить
защита
защите
защитой
защиту
защиты
звезд
звезда
звездам
звездами
звездах
звезде
звездой
звезду
звезды
звонка
звонком
звонку
звонок
здорово
земля
земле
землей
земли
землю
землянка
землянке
землянки
землянкой
землянку
зенит
зенита
зените
зенитом
зениту
злата
зло
змей
знаком
знать
зову
золотая
золотого
золотое
золотой
золотом
золотому
золотую
золотые
золотым
золотыми
золотых
зоотехника
зоотехнике
зоотехнику
ив
ива
иве
иву
игла
игле
иглой
иглу
иглы
иголка
иголке
иголки
иголкой
иголку
играл
играла
играли
играть
изверг
извести
известий
известия
известиях
издали
издание
изданием
издании
изданию
издания
излучение
излучением
излучении
излучению
излучения
измельчал
измельчала
измельчали
измельчать
изменение
изменением
изменении
изменению
изменения
изменил
изменила
изменял
изменяла
изолятор
изолятора
изоляторе
изолятором
изолятору
иконка
иконке
иконки
иконкой
иконку
икра
икры
интегрировать
ирис
искупать
ислам
ислама
исламе
исламом
исламу
испанка
испанке
испанки
испанкой
испанку
исполнил
исполнила
исполнили
исполнить
их
йоги
кабачка
кабачке
кабачком
кабачку
кабачок
кадров
кадрам
кадрами
кадрах
кадры
казаков
какой
кама
капель
капли
карабин
карабина
карабине
карабином
карабину
карате
караульного
караульном
караульному
караульный
караульным
каре
карим
карт
карта
карты
карте
картой
карту
карьера
карьере
карьеру
карьеры
катка
катке
катком
катку
каток
качка
качке
качки
качку
кб
кейс
кейса
кейсе
кейсом
кейсу
кейсы
кистей
кисти
кисть
кистью
кистям
кистями
кистях
китобое
китобоем
китобой
китобою
китобоя
клава
клаве
клавой
клаву
клавы
класс
класса
классам
классами
классах
классе
классика
классики
классику
классная
классной
классную
классов
классом
классу
классы
клей
клея
клеток
клетка
клеткам
клетками
клетках
клетке
клетки
клеткой
клетку
клещам
клещами
клещах
клещей
клещи
клубы
ключ
ключа
ключам
ключами
ключах
ключе
ключей
ключи
ключом
ключу
козлам
козлами
козлах
козлов
козлы
кокетка
кокетке
кокетки
кокеткой
кокетку
кокс
кол
кола
коле
коли
колу
колы
колена
колене
колено
коленом
колену
колода
колоде
колодой
колоду
колоды
колонка
колонке
колонки
колонкой
колонку
колонн
колонна
колоннам
колоннами
колоннах
колонне
колонной
колонну
колонны
колю
ком
команд
команда
командам
командами
командах
команде
командой
команду
командующего
командующем
командующему
командующий
командующим
команды
комаров
комплекс
комплекса
комплексам
комплексами
комплексах
комплексе
комплексов
комплексом
комплексу
комплексы
кому
кондитерская
кондитерской
кондитерскую
консерваторский
конструктор
конструктора
конструкторе
конструктором
конструктору
копейка
копейке
копейки
копейкой
копейку
копи
корил
корила
корили
корить
корма
корней
коробка
коробкам
коробками
коробках
коробке
коробки
коробкой
коробку
коробок
королев
королева
королевы
коса
косе
косой
косу
косы
костей
кости
косяк
косяка
косяке
косяком
косяку
кошка
кошке
кошки
кошкой
кошку
крае
краем
край
краю
края
крепостная
крепостного
крепостной
крепостном
крепостному
крепостную
крепостные
крепостным
крепостными
крепостных
крести
кривая
кривой
кривую
кривые
кривым
кривыми
кривых
критика
критики
критику
критическая
критического
критическое
критической
критическом
критическому
критические
критический
критическим
критическими
критических
критическую
крой
кроле
кролем
кроль
кролю
кроля
кроха
крохи
крошка
крошке
крошки
крошкой
крошку
кругом
кружка
кружкам
кружками
кружках
кружке
кружки
кружков
кружком
кружку
кружок
круп
крупа
крупе
крупу
крыла
крыле
крыло
крылом
крылу
крюков
куб
куба
кубе
кубка
кубке
кубком
кубку
кубок
кубу
кубы
кузнецов
кулон
кулона
кулонов
кура
куре
курица
курице
курицей
курицу
курицы
курой
курс
курса
курсе
курсом
курсу
куру
куры
курил
лавка
лавкам
лавками
лавках
лавки
лавке
лавку
лавкой
лавок
лавра
лагере
лада
ладе
ладой
ладу
лады
лама
ламе
ламой
ламу
ламы
лари
ласка
ласке
ласки
лаской
ласку
лат
лгу
лев
легкая
легкие
легкий
легким
легкими
легких
легкого
легкое
легкой
легком
легкому
легкую
лезгинка
лезгинке
лезгинки
лезгинкой
лезгинку
лекарство
лена
лене
лени
лену
леса
лесах
ли
лика
лила
лимонов
липовая
липового
липовое
липовой
липовом
липовому
липовую
липовые
липовый
липовым
липовыми
липовых
лир
лира
лиры
лирика
лирики
лирику
лисичка
лисичке
лисички
лисичкой
лисичку
лист
листа
листе
листом
листу
лихо
лиц
лица
лице
лицо
лицом
лицу
личное
ловлю
ложек
ложки
ложку
локомотив
локомотива
локомотиве
локомотивом
локомотиву
лом
лох
лук
лука
луки
луком
луку
луке
льва
льве
львица
львице
львицей
львицу
львицы
львов
львом
льву
любим
люда
люк
люка
люке
люком
люку
магазин
магазина
магазине
магазинов
магазином
магазину
магазины
магнит
мазать
майка
майке
майку
майя
макс
малина
малине
малиновая
малинового
малиновое
малиновой
малиновом
малиновому
малиновую
малиновый
малиновым
малиной
малину
малины
малого
малой
малом
малому
малым
мандарин
мандаринка
мандаринке
мандаринки
мандаринкой
мандаринку
манила
манту
маня
марал
марка
марке
марки
марку
марок
марта
марте
марту
марш
марша
марше
маршем
маршу
масленка
мастерская
мастерской
мастерскую
мат
мата
мате
математика
математики
математику
матом
матросов
мату
машин
машина
машины
мед
мел
мела
мели
мелок
мере
мест
места
местам
местами
местах
месте
мести
место
местом
месту
месячные
месячным
месячными
месячных
метал
металлург
металлурга
металлурге
металлургом
металлургу
метил
метила
метили
метить
меха
мехам
мехами
мехах
мехов
механика
механики
механику
меча
мечи
мешал
мешала
мешали
мешать
микрометр
микрометра
микрометре
микрометром
микрометру
миле
мин
мина
минам
минами
минах
мине
миной
мину
мины
минском
мину
мир
мира
мире
миром
миру
миры
мишка
мишке
мишки
мишкой
мишку
мл
мобилизованного
мобилизованном
мобилизованному
мобилизованные
мобилизованный
мобилизованным
мобилизованными
мобилизованных
мода
моде
модой
моду
моды
моем
мой
мок
мокрица
мокрице
мокрицей
мокрицу
мокрицы
мол
молодец
молотов
молочного
молочном
молочному
молочные
молочный
молочным
молочными
молочных
моль
морил
морили
морить
морозов
москвич
москвича
москвиче
москвичом
москвичу
мостовая
мостовой
мостовую
мощи
мою
мук
мука
муке
муки
муку
мур
мура
муре
муру
мусор
мусора
мушка
мушку
мыла
мыши
мышь
мышью
мятой
навязала
надо
надул
надула
надули
надуть
нажал
нажала
нажали
нажать
налет
налета
налете
налетом
налету
нападать
напасть
написал
написала
написали
написать
нарвал
нарвала
нарезка
нарезке
нарезки
нарезкой
нарезку
наряд
наряда
наряде
нарядом
наряду
насрать
настаивал
настаивала
настаивали
настаивать
насте
настроил
настроила
настроили
настроить
насыпь
находка
находке
находки
находкой
находку
начал
начала
начало
начинающий
неба
небом
недосыпал
недосыпала
недосыпали
недосыпать
некогда
неслась
неслись
нестись
нефрит
нефрита
нефрите
нефритом
нефриту
нил
ничья
новосибирском
новостей
новости
новостям
новостями
новостях
номер
номера
номерам
номерами
номерах
номере
номером
номеру
нора
норе
норой
нору
норы
норка
норке
норки
норкой
норку
обваливать
обвесил
обвесила
обвесить
обвешивал
обвешивала
обвешивали
обвешивать
обвиняемого
обвиняемом
обвиняемому
обвиняемые
обвиняемый
обвиняемым
обвиняемыми
обвиняемых
обдув
обеспеченная
обеспеченного
обеспеченной
обеспеченном
обеспеченному
обеспеченную
обеспеченный
обеспеченным
областей
области
область
областью
областям
областями
областях
облицовка
облицовке
облицовки
облицовкой
облицовку
обогрев
обоснование
обоснованием
обосновании
обоснованию
обоснования
образованная
образованного
образованной
образованном
образованному
образованную
образованные
образованный
образованным
образованными
образованных
образом
обратим
обрезка
обрезке
обрезки
обрезку
обрыв
обрыва
обрыве
обрывом
обрыву
овсянка
овсянке
овсянки
овсянкой
овсянку
огне
огнем
огню
огня
огонь
оживленная
оживленного
оживленной
оживленном
оживленному
оживленную
оживленный
оживленным
ока
окружение
окружением
окружении
окружению
окружения
окружной
омар
омара
омаре
омаром
омару
опал
опер
опера
операционная
операционной
операционную
опере
оперу
описал
описала
описалась
описали
описались
описался
описание
описанием
описании
описанию
описания
описанная
описанного
описанной
описанном
описанному
описанную
описанные
описанный
описанным
описанными
описанных
описать
описаться
опор
определение
определением
определении
определению
определения
опровержение
опровержением
опровержении
опровержению
опровержения
оптика
оптике
оптики
оптику
опушка
опушке
опушки
опушкой
опушку
орган
органа
органам
органами
органах
органе
органов
органом
органу
органы
организацией
организации
организацию
организация
орден
ордена
ордене
орденом
ордену
орел
орла
орле
орлом
орлу
орлов
ос
осадка
осадки
освещение
освещением
освещении
освещению
освещения
остроты
острая
острого
острое
острой
остром
острому
острую
острые
острый
острым
острыми
острых
осужденная
осужденного
осужденной
осужденном
осужденному
осужденную
осужденные
осужденный
осужденным
осужденными
осужденных
отделение
отделением
отделении
отделению
отделения
отец
отзыв
отзыва
отзыве
отзывом
отзыву
открытие
открытием
открытии
открытию
открытия
отправление
отправлением
отправлении
отправлению
отправления
отруби
отрыв
отсев
отца
отце
отцов
отцом
отцу
отчего
охота
охотой
охоты
охрана
охране
охраной
охрану
охраны
оценка
оценке
оценки
оценкой
оценку
очкам
очками
очки
очков
па
падали
пайка
пайке
пайки
пайку
пали
папа
папе
папка
папке
папки
папкой
папку
папой
папочка
папочке
папочки
папочкой
папочку
папу
папы
пар
пара
парадная
парадной
парадную
парами
паре
пари
парил
парила
парили
парить
парная
парного
парному
парное
парной
парном
парную
парные
парным
парными
парных
паром
партией
партии
партий
партию
партия
партиям
партиями
партиях
пару
пары
пас
паста
пасте
пасти
пастой
пасту
пасть
пасты
патриции
патрицию
патриция
патрон
патрона
патроне
патроном
патрону
патрульного
патрульном
патрульному
патрульный
патрульным
пах
паша
паше
паши
пашу
пекари
пекла
пекло
перебить
перебил
перебила
перевод
перевода
переводе
переводом
переводу
перегнал
перегнать
перед
передовая
передовой
передовую
перекресток
перекрёсток
перекусил
перекусить
перепел
перепела
перерыв
пересыпал
пересыпала
пересыпали
пересыпать
перу
петухов
печь
пивная
пивной
пивную
пик
пика
пике
пики
пикировал
пикировала
пикировали
пикировать
пику
пила
пион
пиона
пионе
пионом
пиону
пирога
пироге
пироги
пирогу
писал
писала
писали
писать
пита
питу
планировал
планировала
планировали
планировать
планка
пластика
пластики
пластику
плата
плате
платой
плату
платы
плача
плачу
плита
плите
плитой
плиту
плиты
плотников
пни
по
побег
побега
побеге
побеги
побегом
побегу
повзрослей
повод
повода
поводе
поводом
поводу
поганка
поганкам
поганками
поганках
поганке
поганки
поганкой
поганку
поганок
подать
подвеска
подвеске
подвески
подвеской
подвеску
подводной
поджарка
поджарке
поджарки
поджаркой
поджарку
подножка
подножке
подножки
подножкой
подножку
подогрев
подрезал
подрезала
подрезали
подрезать
подрыв
подряд
поешь
пожарного
пожарному
пожарные
пожарный
пожарным
пожарными
пожарных
пойму
покидал
покидала
покидали
покидать
покрой
покрывала
покупка
покупке
покупки
покупкой
покупку
пол
пола
полами
поле
полем
полет
полив
полировка
полировке
полировки
полировкой
полировку
политика
политике
политики
политику
полицейские
полицейский
полицейским
полицейскими
полицейских
полицейского
полицейском
полицейскому
полка
полках
полки
полку
полно
полноте
поло
половая
полового
половой
половом
половому
половую
половые
половым
половыми
половых
положенная
положенного
положенное
положенной
положенном
положенному
положенную
положенные
положенный
положенным
положенными
положенных
полом
полу
полька
польке
польки
полькой
польку
полю
поля
поляков
помело
помешал
помешала
помешали
помешать
помни
помощью
помялась
помялись
помялся
помяться
понт
попа
попадал
попадала
попадали
попадать
попарил
попарила
попарили
попарить
пописал
пописала
пописали
пописать
попов
попова
поповы
поправил
попугай
пора
поре
пород
порода
породам
породами
породах
породе
породой
породу
породы
порой
пору
поры
порт
порта
портом
порту
порты
порыв
порядка
порядком
посадские
посадский
посадским
посадскими
посадских
посадского
посадском
посадскому
после
посол
пост
поста
постам
постами
постах
посте
постов
постом
посту
посты
постановка
постановке
постановки
постановкой
постановку
постового
постовой
постовом
постовому
постовым
постой
потом
потупил
потупила
потупили
потупить
походил
походила
походили
походить
поцелуй
почек
почитай
почитал
почитала
почитали
почитать
почка
почкам
почками
почках
почке
почки
почкой
почку
пошло
пошли
прав
права
правда
правил
правила
правило
правление
правлением
правлении
правлению
правления
право
правом
практик
практика
практики
предлог
предлога
предлоге
предлогом
предлогу
предложение
предложением
предложении
предложению
предложения
премьер
премьера
премьере
премьеру
премьеры
пресса
прессе
прессу
прибыли
привод
приезжая
приемная
приемной
приемную
приемные
приемных
примат
примет
примете
пристав
пристань
притвора
про
проводка
проводки
проводку
проводник
проводника
проводникам
проводниками
проводниках
проводнике
проводники
проводников
проводником
проводнику
проволочка
проволочке
проволочкой
проволочки
проволочку
проезд
проезда
проезде
проездом
проезду
проезжая
производства
производстве
производство
производством
производству
проказа
проказе
проказой
проказу
проказы
пролив
проклятая
проклятого
проклятой
проклятом
проклятому
проклятую
проклятый
проклятые
проклятым
проклятыми
проклятых
пролив
промазал
промазала
промазали
промазать
промазывать
промокнул
промокнула
промокнули
промокнуть
пропарил
пропарила
пропарили
пропарить
пропасть
пропил
пропила
прорывать
просветил
просветила
просветили
просветить
просек
простое
простой
просыпал
просыпала
просыпалась
просыпали
просыпались
просыпался
просыпать
просыпаться
проходная
проходной
проходную
прут
прямая
прямо
прямой
прямую
прямые
прямым
прямыми
прямых
публикацией
публикации
публикацию
публикация
пугал
пугала
пугало
пункт
пункта
пунктам
пунктами
пунктах
пункте
пунктов
пунктом
пункту
пункты
путем
пушка
пуще
пятой
ра
рабочего
рабочем
рабочему
рабочие
рабочий
рабочим
рабочими
рабочих
рад
рада
радикал
радикала
радикалам
радикалами
радикалах
радикале
радикалов
радикалом
радикалу
радикалы
рады
разбалтывал
разбалтывала
разбалтывали
разбалтывать
разболтал
разболтала
разболтали
разболтать
разбегалась
разбегались
разбегался
разбегаться
разведенная
разведенные
разведенный
развилась
развились
развился
развиться
разгон
разгона
разгоне
разгоном
разгону
раздел
раздела
разложилась
разложились
разложился
разложиться
размазне
размазней
размазнёй
размазни
размазню
размазня
разнес
разнесла
разнесли
разносить
разрыв
разрывал
разрывала
разрывали
разрывать
разряд
разряда
разряде
разрядилась
разрядились
разрядился
разрядом
разряду
рак
рака
раке
раком
раку
ран
рань
раскрой
распечатал
распечатала
распечатали
распечатать
распечатывал
распечатывала
распечатывали
распечатывать
распил
распили
расправилась
расправились
расправился
расправиться
расправлялась
расправлялись
расправлялся
расправляться
распущенная
распущенного
распущенной
распущенном
распущенному
распущенную
распущенные
распущенный
распущенным
распущенными
распущенных
расчет
расчета
расчете
расчетом
расчету
реакцией
реакции
реакцию
реакция
резка
результате
реплика
реплике
реплики
репликой
реплику
респираторный
рефлекторный
решающая
решающего
решающей
решающем
решающему
решающие
решающий
решающим
решающими
решающих
решающую
решение
решением
решении
решению
решения
рея
риска
родам
родами
родах
родов
рое
роем
рожки
рожу
роза
розе
розой
розу
розы
рой
рок
рока
роке
рокер
рокера
рокере
рокером
рокеру
роком
року
ролик
ролика
роликам
роликами
роликах
ролике
ролики
роликов
роликом
ролику
рома
роман
романа
романе
романов
романом
романтика
романтике
романтику
роману
рому
рост
роста
росте
ростом
росту
рот
ротного
ротном
ротному
ротный
ротным
ротор
ротора
роторе
ротором
ротору
рохле
рохлей
рохли
рохлю
рохля
рою
роя
рубин
рубина
рубине
рубином
рубину
рублю
ручка
ручке
ручки
ручкой
ручку
рыбина
рыбиной
рыбину
рыл
рыла
рыло
рыси
рысь
рысью
рядилась
рядились
рядился
рядиться
рядового
рядовой
рядовом
рядовому
рядовым
рядом
ряска
ряске
ряски
ряской
ряску
сад
садах
саду
сады
сайка
сайке
сайки
сайкой
сайку
салют
самострел
сане
саней
сани
сантехника
сантехнике
сантехники
сантехнику
сатира
сахара
сахару
сачок
сбегать
сбиваться
сбились
сбиться
сборная
сборной
сборную
сборные
сборных
св
сведения
свет
света
свете
светил
светила
светило
свету
свинка
свинке
свинки
свинкой
свинку
свиснуть
свита
сволочь
связал
связала
связали
связать
связи
связей
связям
связями
связях
сев
сева
седа
сей
секрет
секрета
секрете
секретом
секрету
сел
села
село
семена
сему
семью
сена
сени
сера
серы
сет
сета
сете
сети
сетом
сету
сеть
сетью
сечь
сжал
сжала
сжали
сжатая
сжатого
сжатое
сжатой
сжатом
сжатому
сжатую
сжатые
сжатый
сжатым
сжатыми
сжатых
сжать
сил
силам
силами
силах
силы
сирена
сирене
сиреной
сирену
сирены
систем
система
системам
системами
системах
системе
системой
систему
системы
скажем
скат
ската
скате
скатом
скату
скатывалась
скатывались
скатывался
скатываться
скачка
скачками
скачках
скачки
склад
склада
складе
складом
складу
складной
склоняться
скорби
скотч
скотча
скотче
скотчем
скотчу
слабо
сладил
сладила
сладили
сладить
сланец
сланца
сланцам
сланцами
сланцах
сланце
сланцев
сланцем
сланцу
сланцы
следом
слез
слезу
слепил
слепила
слепили
слепить
слетать
слив
слива
сливе
сливу
сливы
словом
служба
службе
службой
службу
службы
слух
случае
смазанная
смазанного
смазанное
смазанной
смазанном
смазанному
смазанную
смазанные
смазанный
смазанным
смазанными
смазанных
смахивал
смахивала
смахивали
смахивать
смел
смела
смело
смести
сметана
смещение
смещением
смещении
смещению
смещения
смог
смоленском
собр
совет
совета
совете
советом
совету
соколов
соления
соловьев
соль
соне
соней
сони
соню
соня
сооружение
сооружением
сооружении
сооружению
сооружения
сорок
сорока
соска
соски
соску
сослан
сосок
сосочный
состав
состава
составом
составу
составы
сосуд
сосуда
сосудам
сосудами
сосудах
сосуде
сосудов
сосудом
сосуду
сосуды
сочинение
сочинением
сочинении
сочинению
сочинения
союз
союза
союзам
союзами
союзах
союзе
союзов
союзом
союзу
союзы
спальник
спальника
спальнике
спальником
спальнику
спин
спина
спине
спину
сплав
сплава
сплаве
сплавом
сплаву
спор
спора
споре
спору
споры
сравним
среда
среде
средой
средств
средства
средствам
средствами
средствах
средстве
средство
средством
средству
среду
среды
срезал
срезала
срезали
срезать
срыв
срывал
срывала
срывали
срывать
ссылка
ссылке
ссылки
ссылкой
ссылку
ставка
ставке
ставку
ставок
стакан
стакана
стаканов
стан
стану
старина
старины
старине
стариной
старину
стать
ствол
ствола
стволам
стволами
стволах
стволе
стволов
стволом
стволу
стволы
стек
стекла
стекло
степа
стих
стоек
стоит
стойкой
стол
стола
столами
столах
столу
столовая
столовой
столовую
столовые
столовым
столовыми
столовых
стоп
сторожа
стою
стоя
стоянка
стоянке
стоянки
стоянкой
стоянку
стоят
стоящая
стоящего
стоящее
стоящей
стоящем
стоящему
стоящие
стоящий
стоящим
стоящими
стоящих
стоящую
стрелка
стрелок
стрижка
стрижке
стрижки
стрижкой
стрижку
строил
строила
строили
строить
строй
строю
строя
стул
стула
стуле
стулом
стулу
суда
судам
судами
судах
судном
судов
суете
сук
сука
суке
суки
сучек
сучка
сучке
сучки
сучку
суше
суши
сушка
сушке
сушки
сушкой
сушку
сфер
сфера
сферам
сферами
сферах
сфере
сферой
сферу
сферы
съем
сыпь
сыра
такса
таксе
таксой
таксу
таксы
танка
танке
танки
танку
тартар
тачка
тачке
тачки
тачкой
тачку
тел
телец
тельца
тельце
тельцу
тени
теплом
теплофизика
теплофизике
теплофизику
теста
техник
техника
техникам
техниками
техниках
технике
техники
техникой
технику
течение
течением
течении
течению
течения
течь
тикал
тикала
тикали
тикать
типа
тире
тканей
ткани
ткань
тканью
тканям
тканями
тканях
то
ток
току
толи
толика
толику
толкование
толкованием
толковании
толкованию
толкования
толку
толстому
толще
том
тома
томе
томом
тому
тоне
тону
топ
топил
топила
топили
топились
топить
топиться
тора
торе
тору
тост
тоста
тосте
тостом
тосту
точек
точка
точкам
точками
точках
точке
точки
точкой
точку
травил
травила
травили
травить
трактор
трактора
тракторе
трактором
трактору
траншей
треснул
треснула
треснуть
три
трибун
трибуна
трибуне
трибуну
трону
трусам
трусами
трусах
трусил
трусила
трусили
трусить
трусов
трусы
трут
туалет
туалета
туалете
туалетом
туалету
тулуп
тулупа
тулупов
тупик
тупики
тупил
тупила
тупили
тупить
тур
турка
турки
турку
туша
туше
туши
тушил
тушила
тушили
тушить
тушка
тушке
тушки
тушкой
тушку
убеждение
убеждением
убеждении
убеждению
убеждения
уважаем
уведомление
уведомлением
уведомлении
уведомлению
уведомления
угорь
удали
удой
уж
уже
узел
узла
узлам
узлами
узлах
узле
узлов
узлом
узлу
узлы
укладка
укладке
укладки
укладкой
укладку
украшение
украшением
украшении
украшению
украшения
укрепление
укреплением
укреплении
укреплению
укрепления
укроп
укропа
укропе
укропом
укропу
улучшение
улучшением
улучшении
улучшению
улучшения
универсал
универсала
универсале
универсалом
универсалу
упаковка
упаковке
упаковки
упаковкой
упаковку
уплотнение
уплотнением
уплотнении
уплотнению
уплотнения
упокой
управление
управлением
управлении
управлению
управления
управляющая
управляющего
управляющей
управляющем
управляющему
управляющие
управляющий
управляющим
управляющими
управляющих
управляющую
усаживаться
устав
устало
утверждение
утверждением
утверждении
утверждению
утверждения
утка
утке
утки
уткой
утку
утопал
утопала
утопали
утопать
уточнение
уточнением
уточнении
уточнению
уточнения
уха
уход
ухода
уходе
уходу
уху
участкового
участковом
участковому
участковые
участковый
участковым
участковыми
участковых
учений
учения
учениям
учениями
учениях
ученого
ученом
ученому
ученые
ученый
ученым
учеными
ученых
ушиб
ушибу
фас
федерацией
федерации
федерацию
федерация
ферма
фига
фиге
фигой
фиги
фигу
фиговая
фигового
фиговой
фиговом
фиговому
фиговую
фиговые
фиговый
фиговым
фиговыми
фиговых
физика
физике
физики
физику
финка
финке
финки
финкой
финку
фифа
фок
фон
франк
франка
франки
франков
хабаровском
хана
хватит
хлебала
хлопка
хлопке
хлопком
хлопку
хлопок
хмелем
хмеле
хмель
хмелю
хмеля
ходе
ходок
хором
хохла
хохле
хохлом
хохлу
хохол
христиане
хром
хромая
хроник
хроника
хроники
хронику
худая
худого
худой
худом
худому
худую
худые
худым
худыми
худых
целим
целит
целите
целить
целую
целю
целят
центр
центра
центрам
центрами
центрах
центре
центров
центром
центру
центры
чад
чада
чаде
чадом
чаду
чаек
чай
чайке
чайку
частей
части
часть
частью
частям
частями
частях
часам
часами
часах
часов
часы
чаще
чаю
чека
челнок
челнока
челноке
челноком
челноку
чем
череда
череде
череду
черпак
черпака
черпаке
черпаком
черпаку
черт
черта
черте
черту
черты
чехов
чешек
чешка
чешкам
чешками
чешках
чешке
чешки
чешкой
чешку
чудом
чума
чуме
чуму
чумы
шабаш
шар
шара
шаре
шаром
шару
шатун
шатуна
шатуне
шатуном
шатуну
шах
шаха
шахе
шахом
шаху
шахтер
шахтера
шахтере
шахтером
шахтеру
шахтёр
шахтёра
шахтёре
шахтёром
шахтёру
шашка
шашке
шашки
шашкой
шашку
шестом
шила
шкода
шкоде
шкодой
шкоду
шкоды
шлем
шпик
шурин
экипаж
экипажа
экипаже
экипажем
экипажи
экипажу
электрика
электрике
электрики
электрику
электротехника
электротехнике
электротехники
электротехнику
энергетики
это
юра
яблока
яблоке
яблоко
яблоком
яблоку
ява
яве
явой
яву
явы
ядер
ядра
ядрам
ядрами
ядрах
ядре
ядро
ядром
ядру
язык
языка
языке
языком
языку
яички
яиц
яйца
яйцам
яйцами
яйцах
яков
янки
ястребов
ячеек
ячейка
ячейкам
ячейками
ячейках
ячейке
ячейки
ячейкой
ячейку
"""

multisense_words = multisense_words_str.split()

#print(multisense_words)

# Загрузим векторную модель (одновременно добавив в нее служебные векторы)
print('Loading embeddings...')
vm = EmbeddingsReader("vectors-rue.c2v")
# Создадим токенизатор
print('Creating tokenizer...')
tokenizer = Tokenizer(vm)

multisense_enc = [ tokenizer.token2subtokens(t) for t in multisense_words ]
multisense_enc = [ t for t in multisense_enc if t != [EmbeddingsReader.OOV_IDX, EmbeddingsReader.OOV_IDX] ]

#print(multisense_enc)

stfn = os.path.join(CACHE_DIR, 'stat.info')
stfn2 = os.path.join(CACHE_DIR, 'stat2.info')


with open(stfn, 'r', encoding='utf-8') as stf:
    with open(stfn2, 'w', encoding='utf-8') as stf2:
        for line in stf:
            line = line.split()
            tok = [int(line[0]), int(line[1])]
            line.append( 1.0 if not tok in multisense_enc else 0.0001 ) # можно и 0, но пользы от этого значительной нет
            if tok in multisense_enc:
                line[3] = line[3] if float(line[3]) > 0.9 else 0.9
            stf2.write("{} {} {} {} {}\n".format( line[0], line[1], line[2], line[3], line[4] ))
            
